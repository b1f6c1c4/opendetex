#!/bin/bash

set -euo pipefail

MY="$(dirname "$(realpath "$0")")"

BIN="$("$MY/detex-build")"

if [ -n "${DISPLAY:-}" ] && command -v xclip >/dev/null; then
    "$BIN" -lsr1 "$@" | "$MY/detex-util" canon | xclip -selection clipboard
else
    "$BIN" -lsr1 "$@" | "$MY/detex-util" canon
fi
